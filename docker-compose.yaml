---
version: '3.6'
services:
  drs:
    container_name: pa-drs
    build:
      context: .
    links:
    - db
    ports:
    - "8080:8080"
    environment:
      MONGO_URI: "mongodb://admin:password@db:27017/drsStore?authSource=admin"
      SEC_KEY: |
        -----BEGIN CRYPT4GH PRIVATE KEY-----
        YzRnaC12MQAEbm9uZQAEbm9uZQAg5eYgf1QUl1cFyquP6OgMz2faF2uSc4s8OXf0L4MLRQM=
        -----END CRYPT4GH PRIVATE KEY-----
      PUB_KEY: |
        -----BEGIN CRYPT4GH PUBLIC KEY-----
        dq/9iq2WMYpYQqnxVpfd0pwRp2PToAccVWldr+kynCI=
        -----END CRYPT4GH PUBLIC KEY-----
      STORAGE_HOST: s3.au-southeast-1.amazonaws.com
      STORAGE_BUCKET: mybucket
      STORAGE_SECURE: true
      ACCESS_KEY: key
      SECRET_KEY: secret
  db:
    image: mongo:6.0
    environment:
      MONGO_INITDB_ROOT_USERNAME: admin
      MONGO_INITDB_ROOT_PASSWORD: password
    ports:
    - "27017:27017"
